(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function n(e){if(e.ep)return;e.ep=!0;const t=o(e);fetch(e.href,t)}})();function v(){let r=document.getElementById("webcam");navigator.mediaDevices.getUserMedia({video:{facingMode:{exact:"environment"}},audio:!1}).then(function(o){r.srcObject=o,r.play(),r.addEventListener("loadeddata",i)}).catch(function(o){console.log("An error occurred! "+o)});function i(){let o=r.videoHeight,n=r.videoWidth;console.log(o+":"+n);let e=document.getElementById("transferCanvas");e.width=n,e.height=o;let t=e.getContext("2d"),c=new cv.Mat(o,n,cv.CV_8UC4),a=new cv.Mat(o,n,cv.CV_8UC1),d=new cv.Mat;new cv.Scalar(255,0,0);const l=30;function s(){let u=Date.now();t.drawImage(r,0,0,n,o),c.data.set(t.getImageData(0,0,n,o).data),cv.cvtColor(c,a,cv.COLOR_RGBA2GRAY),cv.Canny(a,a,50,100,3,!0),cv.HoughLinesP(a,d,1,Math.PI/180,2,0,0),cv.imshow("displayCanvas",a);let f=1e3/l-(Date.now()-u);setTimeout(s,f)}setTimeout(s,0)}}window.openCvReady=v;
