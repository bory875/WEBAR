(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const r of t.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function d(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(e){if(e.ep)return;e.ep=!0;const t=d(e);fetch(e.href,t)}})();window.openCvReady=function(){let n=document.getElementById("webcam");navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1}).then(function(o){n.srcObject=o,n.play(),n.addEventListener("loadeddata",d)}).catch(function(o){console.log("An error occurred! "+o)});function d(){let o=n.videoHeight,e=n.videoWidth;console.log(o+":"+e);let t=document.getElementById("transferCanvas");t.width=e,t.height=o;let r=t.getContext("2d"),a=new cv.Mat(o,e,cv.CV_8UC4),s=new cv.Mat(o,e,cv.CV_8UC1),i=new cv.Mat,f=new cv.Scalar(255,0,0);const v=30;function l(){let g=Date.now();r.drawImage(n,0,0,e,o),a.data.set(r.getImageData(0,0,e,o).data),cv.cvtColor(a,s,cv.COLOR_RGBA2GRAY),cv.Canny(s,s,50,100,3,!0),cv.HoughLinesP(s,i,1,Math.PI/180,2,0,0);for(let c=0;c<i.rows;++c){let h=new cv.Point(i.data32S[c*4],i.data32S[c*4+1]),p=new cv.Point(i.data32S[c*4+2],i.data32S[c*4+3]);cv.line(a,h,p,f)}cv.imshow("displayCanvas",a);let m=1e3/v-(Date.now()-g);setTimeout(l,m)}setTimeout(l,0)}};
